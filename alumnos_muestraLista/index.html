
<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>Pagina de prueba</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <link rel="stylesheet" type="text/css" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css"/>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
</head>
<body>
    <h3>Ejercicio Node, Express, Jquery</h3>
    <form action="">
        <input type="text" placeholder="Nombre" name="nombre" id="nombre">
        <input type="text" placeholder="Clave" name="clave" id="clave">
        <button id="act" type="button"> Enviar </button>
    </form>



   <!-- <h2>Make a table based on JSON data.</h2>

        <p id="demo"></p>

        <script>
           var obj, dbParam, xmlhttp, myObj, x, txt = "";
           obj = { nombre: "customers", clave: "" };
           dbParam = JSON.stringify(obj);
           xmlhttp = new XMLHttpRequest();
           xmlhttp.onreadystatechange = function() {
             if (this.readyState == 4 && this.status == 200) {
                 myObj = JSON.parse(this.responseText);
                 txt += "<table border='1'>"
                 for (x in myObj) {
                      txt += "<tr><td>" + myObj[x].name + "</td></tr>";
                     }
                       txt += "</table>"    
                    document.getElementById("demo").innerHTML = txt;
  }
};
            xmlhttp.open("POST", "alumnos.js", true);
            xmlhttp.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
            xmlhttp.send("x=" + dbParam);
</script>-->



   <div class="container">
        <div class="section ">
          <!--  <button class="btn" id="boton">JSON</button>-->
             <h1>Read Data From JSON File to HTML table</h1>
             <table class="table" id="employe">
                 <tr>
                     <th>nombre</th>
                     <th>clave</th>
                 </tr>
             </table>
        </div>


            <!--<table>
                <thead>
                    <tr>
                        <th>Nombre</th>
                        <th>Clave</th>
                    </tr>
                </thead>
                <tbody id="res">
                    
                </tbody>
            </table>
            <script src="alumnos.js"></script>

            <script>
                $(document).ready(function(){
                    $.ajax({
                        url:"alumnos.json",
                        dataType:"json",
                        success:function(data){
                            $(data.users)each(function(index,value){
                                var record="<tr><td>"+(index+1)+"</td><td>"+value.nombre+"</td><td>"+value.clave+"</td><td>";
                                $("table").append(record);
                            });
                        }

                    });
                });
            </script>-->









        </div>
    </div>

</body>

<script>
    //cunado el documento este listo y todos los objetos 
    $(document).ready( function(){
        //Programacion del boton act para obtener datos del input.
        $("#act").on("click", function(event){
            console.log(event);
            var alumno = { }; //Creacion de objeto con la info necesaria.
            alumno.nombre = $("#nombre").val();
            alumno.clave = $("#clave").val();
            //Invocamos a la funcion para llamadas post y mandamos el obeto.
            sendPOSTRequest(alumno);
        });
    });

 
    function sendPOSTRequest(body_object){
        //Llamada post al backend usando jquery.
        //console.log("Objeto enviado por POST: " );
        //console.log(body_object);
        
        $.post("http://localhost:3000/alumnos", body_object , 
        function(){
            alert("Alumno guardado.");
        });
    }
</script>
<script>
     $(document).ready(function(){
        $.getJSON("alumnos.json",function(data){
            var employe_data="";
            $.each(data,function(key,value){
                employe_data += '<tr>';
                employe_data += '<td>'+value.nombre+'</td>';
                employe_data += '<td>'+value.clave+'</td>';
            });
            $('#employe').append(employe_data);
    });
    });

</script>
</html>